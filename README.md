
## üìö √çndice

- [üõ†Ô∏è Language and Tools Used](#Ô∏è-language-and-tools-used)
- [‚ú® Key Features](#-key-features)
- [üìÇ File Structure](#-file-structure)
- [üîß Installation and Setup Guide](#-installation-and-setup-guide)
- [üöß Known Issues and Future Improvements](#-known-issues-and-future-improvements)
- [ü§ù Contributing](#-contributing)
- [üë®‚Äçüíª Author](#-author)

## MiniCompilerOnSteroids	
Project Overview
MiniCompilerOnSteroids is a web-based educational mini compiler for a subset of JavaScript. It performs lexical, syntactic, and semantic analysis on the input code, and can also translate JavaScript into other languages like Ruby and PHP. The compiler is implemented in JavaScript (with a browser-based HTML/CSS interface) and uses Peggy (a modern PEG.js fork) to generate its parser. Using Peggy enables precise error reporting with line and column numbers for any syntax errors. This project was originally developed as a compilers course project at UTESA, demonstrating how a compiler can be built in JavaScript and run entirely in the browser.    
  
  
The MiniCompilerOnSteroids user interface in action. The app features a dark-themed, multi-panel layout. The left side (black panel) shows compiler logs and messages, while the right side is divided into panels for the Source Code (JavaScript input), the Translated Code (output in another language, Ruby shown here), Errors Detected (with descriptions and locations, empty here as no errors), and a Symbol Table listing identifiers. Users can type or load code, then use the File/Tools menu to analyze or translate the code.
## üõ†Ô∏è Language and Tools Used
Programming Language: JavaScript (ES6) ‚Äì Core logic of the compiler and the parser runtime.
UI: HTML5 and CSS3 ‚Äì Provides the web interface (with a dark theme and panel layout).
Parser Generator: Peggy (PEG.js fork) ‚Äì Used to define the grammar and generate the parser for syntactic analysis, supporting advanced error tracking.
Lexical Analysis: Custom tokenizer in JavaScript (similar in concept to using Lex/Flex) to break the input into tokens for the parser.
Parser Architecture: The grammar (PEG) defines a recursive descent parser (LL parsing) generated by Peggy, combined with semantic analysis code for context checks.
Platform: Web (Browser) ‚Äì No server needed. The compiler runs entirely in the browser by opening index.html. Development uses Node.js for building the parser.
## ‚ú® Key Features
‚úÖ Lexical Analysis: Identifies valid tokens (identifiers, numbers, operators, etc.) and detects lexical errors (e.g. unknown symbols).
‚úÖ Syntactic Analysis: Uses the Peggy-generated parser to detect grammatical errors in the code structure. If the code doesn't conform to the grammar (for example, a missing brace or incorrect loop syntax), an error with exact position is reported.
‚úÖ Semantic Analysis: Performs semantic checks such as variable redeclaration, type mismatches, or misuse of identifiers in scope. This ensures the code not only parses correctly but also makes sense semantically.
‚úÖ Error Reporting: Provides detailed error messages with line and column information. The interface highlights or lists errors (with type, description, and location) so users can quickly pinpoint and fix issues in the source code.
‚úÖ Symbol Table Display: After a successful analysis, the compiler displays a symbol table listing all identifiers (variables, functions, etc.) encountered, along with their token type and the location of their first occurrence.
‚úÖ Code Translation: Translates the input JavaScript code into an equivalent snippet in another language (currently supports basic output to languages like Ruby or PHP). This showcases how the source code could look in a different target language. (For example, a simple JavaScript loop and function might be converted into a comparable structure in Ruby.)
‚úÖ Modern Interface: Features a clean, dark-themed UI with multiple panels. Users have a text area for writing code, and separate sections to view the translated code, errors, and symbol table. There are drop-down menus (File, Tools) for actions like opening files, running the analysis, executing the JS code, or translating to another language.
‚úÖ Open Source: The project is open source. Contributions are encouraged to improve the grammar, add new features or target languages, enhance the UI, and fix any bugs or limitations.

## üìÇ File Structure
The project repository is organized as follows:  
  
  ```plaintext
MiniCompilerOnSteroids/
‚îú‚îÄ‚îÄ index.html        # Main HTML interface (structure of the web app)
‚îú‚îÄ‚îÄ style.css         # CSS styles for the UI (dark theme, layout)
‚îú‚îÄ‚îÄ compiler.js       # JavaScript logic for the compiler (lexical, syntax, semantic analysis and translation)
‚îú‚îÄ‚îÄ grammar.peggy     # Grammar definition file for Peggy (PEG syntax rules)
‚îú‚îÄ‚îÄ grammar.js        # Generated parser (JavaScript) from the grammar, used by compiler.js
‚îî‚îÄ‚îÄ README.md         # Project documentation (this file)
 ```
 
Important files:
index.html: Defines the user interface. It sets up the layout with panels for source code input, translated output, error list, and the symbol table. It also includes the menus (File, Tools) and links to the CSS and JS scripts.
style.css: Stylesheet for the UI, including the dark theme colors, layout of panels, fonts, and responsive adjustments.
compiler.js: The main JavaScript file containing the compiler implementation:
Performs lexical analysis (tokenization of input code).
Invokes the parser (from grammar.js) for syntactic analysis.
Conducts semantic checks on the parsed abstract syntax (e.g., symbol table creation, type checking).
Generates the translated code for the target language (e.g., Ruby or PHP output).
Handles UI updates like populating the error table, symbol table, and output areas.
grammar.peggy: The source grammar file written in Peggy's syntax. This file describes the language grammar (the rules for what constitutes valid code). Whenever you want to extend or modify the language (for example, to support a new syntax or fix an issue with parsing), you will edit this file. Note: The grammar currently handles most JavaScript structures needed for the project, but has some known limitations (see Known Issues).
grammar.js: The generated parser file, produced by Peggy from grammar.peggy. This file contains the parser code (as JavaScript) which compiler.js uses to parse the input. It includes built-in logic for tracking line/column numbers to report errors precisely. Whenever the grammar is updated and grammar.js is regenerated, you must edit the very end of this file (see Setup guide below) to fix the export wrapper for browser usage.
README.md: Documentation for the project (you are reading it). It provides an overview, setup instructions, and other relevant information.


(There may also be example input files (like Capicua.txt, CuadradoPerfecto.txt) included in the repository for testing the compiler, but they are not required for using the app.)  

## üîß Installation and Setup Guide
This section covers how to set up the project for development or make changes to the grammar. Since this is a client-side web application, you don't need to compile or install anything to run it ‚Äì you can simply open index.html in a web browser. However, if you want to modify the compiler (especially the grammar) or ensure your environment matches the project, follow these steps:
Install Node.js (with NVM for version management):
MiniCompilerOnSteroids uses Node.js for development tasks (like running Peggy to build the parser). It‚Äôs recommended to use Node Version Manager (NVM) to install and manage Node.js versions.
If you don't have Node.js, install it via the official installer from the Node website or using NVM. To install NVM, see the instructions on the NVM GitHub repository.
Once NVM is installed, navigate to the project directory and run nvm install to install the Node version specified in the .nvmrc file. Then run nvm use to switch to that version. (The included .nvmrc file specifies the Node version to use, e.g. v20.14.0.)
Alternatively, if not using NVM, make sure your Node.js version matches the one in .nvmrc (or is close to it) to avoid any compatibility issues.
Install Peggy (Parser Generator):
Peggy is required to rebuild the parser from the grammar. You can install Peggy globally using npm:

```bash
npm install -g peggy
```

Alternatively, you can install it as a dev dependency in the project or simply use it via npx (which will download and run Peggy without global install). For example, the commands below use npx to run Peggy. (If Peggy is not installed, npx will prompt to install it on first use.)
Edit the Grammar (if needed):
Open the grammar.peggy file in a text editor to add or modify grammar rules. For example, you might want to fix known issues or add support for new language constructs. Make your changes and save the file.
Note: The grammar uses PEG syntax. Be careful with the grammar structure to not introduce conflicts or ambiguities. Common edits might include allowing in-line variable declarations in for loops or handling the === operator properly (see Known Issues).
Rebuild the Parser:
After editing grammar.peggy, you need to generate an updated grammar.js. First, remove or backup the old grammar.js (to avoid confusion). Then run Peggy with the appropriate options to produce a browser-friendly parser:

```bash
npx peggy --format globals --export-var parser grammar.peggy -o grammar.js

```

This command tells Peggy to read grammar.peggy and output a parser file grammar.js. The --format globals --export-var parser options ensure that the generated parser is exposed as a global variable named parser (which our compiler.js expects when running in the browser). The new grammar.js will be created in the project directory.
Fix the Parser Export Wrapper:
Peggy's output (grammar.js) typically ends with a wrapper that may not be immediately compatible with browsers. Specifically, you will find the last lines of grammar.js look like this:


```js
})(this);
```


For the parser to work in a browser context, change this to window in that line, so it becomes:


```js
})(window);
```



This modification ensures that the parser is attached to the browser's global window object (instead of Node‚Äôs global object), making parser.parse(...) available when you include grammar.js in a <script> tag. If you skip this step, you might get an error that parser is not defined in the browser.
Run the Compiler:
Now you're ready to use the mini compiler. Open the index.html file in your web browser (just double-click it or use a live server extension if you prefer). You should see the MiniCompilerOnSteroids interface. Write or paste some JavaScript code in the C√≥digo Fuente (Source Code) panel on the left. Then click the Tools ‚Üí Analizar (Analyze) button to perform lexical/syntax/semantic analysis. Any errors will appear in the Errors panel, and the Symbol Table will list identifiers. You can also directly run the code with Ejecutar JavaScript (Execute JS) or translate it with Traducir a Ruby (Translate to Ruby) ‚Äì the result will appear in the C√≥digo Destino panel. Use the File menu to save or load code as needed. No additional setup is required for running the compiler beyond opening the HTML file.

## üöß Known Issues and Future Improvements
As this project is a work in progress, there are some known limitations and planned enhancements:

For-Loop Variable Declarations: The grammar currently does not support declaring a loop variable directly inside a for loop initialization 
```
(e.g., for (let i = 0; i < 10; i++)) 
```


As a workaround, the example code declares i outside the loop. Improving the grammar to allow in-loop declarations is a planned update.
Triple Equals (===): There is a known issue with parsing the strict equality operator ===. The current grammar might not handle it correctly in all cases. This will be addressed in a future version so that strict equality comparisons are parsed without errors.

``` js
let a = 1;
let b = 10;
let result = 0;

if (a===b) { //error here in the comparison
// Some code...
}
```

Error Recovery: While the compiler provides detailed error messages, it does not attempt to recover from an error and continue parsing the rest of the input. Enhancing the parser for better error recovery (allowing multiple errors to be reported in one go) and clearer messaging is an area for improvement.
Expanded Language Features: The project currently supports a core subset of JavaScript. Future plans include adding support for more JavaScript constructs (such as more complex expressions, additional statement types, or object-oriented features) and optimizing the generated code for target languages. There is also interest in expanding the translation capability to other languages (for example, improving the Ruby output and possibly adding another target like Python or Go).
## ü§ù Contributing
Contributions to MiniCompilerOnSteroids are welcome and encouraged! If you have ideas to improve the parser, add new features, fix bugs, or enhance the user interface, feel free to get involved:
Fork the Repository: Start by forking the project repository to your own GitHub account and cloning it locally.
Create a Branch: Make a new branch for your feature or fix.
Implement and Test: Do your changes. If you modify the grammar or compiler logic, test with various input code to ensure everything works (and rebuild the parser if the grammar changed).
Submit a Pull Request: Push your branch to GitHub and open a pull request with a clear description of your changes. Discuss with maintainers (if any) to refine the contribution if needed.
Report Issues: If you're not ready to code, you can still help by reporting any issues or suggesting enhancements by opening issues on the repository.
Please ensure your contributions align with the project's goals and that you test thoroughly. All contributions, big or small, are appreciated. Together, we can make this mini compiler more powerful and robust!  

## üë®‚Äçüíª Author
```
Name: F√©lix Jos√© Blanco Cabrera
Student ID: 1-17-1693
Course: Compilers (University UTESA)
Professor: Ivan Mendoza
University: Universidad Tecnol√≥gica de Santiago (UTESA), Dominican Republic  

*************************|
Code for fun, by F√©lix.  |  
*************************|
**************************
```